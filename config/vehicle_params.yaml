# VEHICLE-SPECIFIC ROS PARAMETER VALUES

/**:
  ros__parameters:
    # water_salinity_ppt: 0.0 # 0.0 for fresh water, 35.0 for salt water
    # magnetic_declination: 10.7 # E is positive, W is negative, 10.70Â° E for Utah Lake
    # https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml?

    vehicle_ID: 3
    origin:
      latitude: 40.238833
      longitude: -111.742249
      altitude: 1367.00

/**/pressure_pub:
  ros__parameters:
    publish_frequency: 20.0 # max 20 Hz for MS5837
    frame_id: 'bluerov2/depth_link'


/**/depth_converter:
  ros__parameters:
    fluid_density: 997.0
    use_salinity_model: false
    water_salinity_ppt: 35.0
    fluid_pressure_atm: 87250.0
    min_calibration_samples: 500
    calibration_timeout_s: 30.0
    calibration_max_variance: 30.0
    calibration_max_offset: 40000.0
    default_depth_variance: 0.5
    use_calibration_variance: true
    calibrate_on_startup: true

bluerov2: # Change this to match the vehicle name

  # gps_odom:
  #   ros__parameters:
  #     origin.latitude: 40.238833 # 40.2735 for Utah Lake
  #     origin.longitude: -111.742249 # -111.7126 for Utah Lake
  #     origin.altitude: 1367.00 # from testing

  dvl_a50_node:
    ros__parameters:
      dvl_ip_address: "192.168.2.95"
      velocity_frame_id: "bluerov2/dvl_link"
      position_frame_id: "bluerov2/dvl_link"

      
  shallow:
    pressure_pub:
      ros__parameters:
        sensor_type: 0
        i2c_bus: 1

  deep:
    pressure_pub:
      ros__parameters:
        sensor_type: 1
        i2c_bus: 0


    depth_converter:
      ros__parameters:
        calibration_max_variance: 900.0

  vehicle_pinger:
    ros__parameters:
      enable_ping: false
      ping_frequency_seconds: 4
      vehicles_in_mission: [1,2,15]


  imu_odom_anchor:
    ros__parameters:
      local_odom_topic: imu/odom
      global_odom_topic: gps/odom

      map_frame: map
      odom_frame: bluerov2/imu_odom
      child_frame: bluerov2/imu_link

      max_position_variance: 2.0     # meters^2
      max_yaw_variance: 0.3          # rad^2
  
  dvl_odom_anchor:
    ros__parameters:
      local_odom_topic: dvl/odom
      global_odom_topic: gps/odom

      map_frame: map
      odom_frame: bluerov2/dvl_odom
      child_frame: bluerov2/dvl_link

      max_position_variance: 2.0     # meters^2
      max_yaw_variance: 0.3          # rad^2

  odom_to_navsat:
    ros__parameters:
      odom_topic: imu/odom
      output_topic: imu/fix

  dvl_to_navsat:
    ros__parameters:
      odom_topic: dvl/odom
      output_topic: dvl/fix

    # modem_ros_node:
    #   ros__parameters:
    #     seatrac_serial_port: "/dev/frost/rs232_connector_seatrac" # TODO fix the port with the SBG plugged in

    # nmea_converter:
    #   ros__parameters:
    #     covariance_max_publish: 20.42


  